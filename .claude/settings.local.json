{
  "permissions": {
    "allow": [
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT p.id, p.nombre, p.categoria_id, c.nombre as categoria FROM productos p JOIN categorias c ON p.categoria_id = c.id WHERE p.activo = true ORDER BY c.nombre, p.nombre LIMIT 20;\")",
      "Bash(git merge:*)",
      "Bash(git checkout:*)",
      "Bash(git branch:*)",
      "Bash(git worktree:*)",
      "Bash(git add:*)",
      "Bash(npm run build:*)",
      "Bash(npx prisma format:*)",
      "Bash(cat:*)",
      "Bash(npx prisma:*)",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"CREATE INDEX IF NOT EXISTS ix_precios_producto_fecha ON precios(producto_id, ultima_modificacion DESC); COMMENT ON INDEX ix_precios_producto_fecha IS ''Ãndice optimizado para obtener precio actual por producto (ORDER BY + LIMIT 1)'';\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"CREATE INDEX IF NOT EXISTS ix_precios_producto_fecha ON precios(producto_id, ultima_modificacion DESC); COMMENT ON INDEX ix_precios_producto_fecha IS ''Indice optimizado para obtener precio actual por producto (ORDER BY + LIMIT 1)'';\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"COMMENT ON INDEX ix_precios_producto_fecha IS ''Indice optimizado para obtener precio actual por producto (ORDER BY + LIMIT 1)'';\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT obj_description(''ix_precios_producto_fecha''::regclass, ''pg_class'');\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT COUNT(*) as total_precios, COUNT(DISTINCT producto_id) as productos_con_precios FROM precios;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT COUNT(*) as total_productos FROM productos;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT nombre, COUNT(*) as cantidad FROM productos GROUP BY nombre HAVING COUNT(*) > 1 ORDER BY cantidad DESC LIMIT 20;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT nombre, COUNT(*) as cantidad FROM productos GROUP BY nombre HAVING COUNT(*) > 1 ORDER BY cantidad DESC;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT id, nombre, precio_lista FROM productos WHERE nombre IN (SELECT nombre FROM productos GROUP BY nombre HAVING COUNT(*) > 1) ORDER BY nombre, id LIMIT 10;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\":*)",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT COUNT(*) FROM detalle_venta WHERE producto_id IN (SELECT id FROM productos WHERE nombre IN (SELECT nombre FROM productos GROUP BY nombre HAVING COUNT(*) > 1));\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT p.id, p.nombre, pr.precio_supermayorista, pr.precio_mayorista, pr.precio_minorista, CASE WHEN pr.precio_supermayorista > pr.precio_mayorista OR pr.precio_mayorista > pr.precio_minorista THEN ''INCORRECTO'' ELSE ''OK'' END as validacion FROM productos p LEFT JOIN LATERAL (SELECT precio_minorista, precio_mayorista, precio_supermayorista FROM precios WHERE producto_id = p.id ORDER BY ultima_modificacion DESC LIMIT 1) pr ON true WHERE pr.precio_minorista IS NOT NULL AND (pr.precio_supermayorista > pr.precio_mayorista OR pr.precio_mayorista > pr.precio_minorista) LIMIT 15;\")",
      "Bash(mkdir:*)",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -f database/scripts/01-backup-antes-limpieza.sql)",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -f database/scripts/03-validar-integridad.sql)",
      "Bash(npm install:*)",
      "Bash(npm test:*)",
      "Bash(npm run:*)",
      "Bash(tree test:*)",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT COUNT(*) as total_productos, COUNT(DISTINCT id) as productos_unicos FROM productos WHERE activo = true;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT producto_id, COUNT(*) as cantidad FROM precios GROUP BY producto_id HAVING COUNT(*) > 1 ORDER BY cantidad DESC LIMIT 10;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT p.id, p.nombre FROM productos p LEFT JOIN precios pr ON p.id = pr.producto_id WHERE p.activo = true AND pr.id IS NULL LIMIT 10;\")",
      "Bash(\"/c/Program Files/PostgreSQL/18/bin/psql.exe\" \"postgresql://postgres.rfhizunlwvoemvlscbqg:Fpxybq7IxyXjKHJU@aws-1-sa-east-1.pooler.supabase.com:5432/postgres\" -c \"SELECT producto_id, ultima_modificacion, COUNT(*) as duplicados FROM precios GROUP BY producto_id, ultima_modificacion HAVING COUNT(*) > 1 LIMIT 10;\")"
    ],
    "deny": [],
    "ask": []
  }
}
